# Zartan
<!-- ALL-CONTRIBUTORS-BADGE:START - Do not remove or modify this section -->
[![All Contributors](https://img.shields.io/badge/all_contributors-6-orange.svg?style=flat-square)](#contributors-)
<!-- ALL-CONTRIBUTORS-BADGE:END -->

<!-- markdownlint-disable -->
<a href="https://en.wikipedia.org/wiki/Zartan">
  <img src="./docs/_img/zartan.png" width="200px;" />
</a>
<!-- markdownlint-enable -->

Zartan is a master of make-up and disguise and so is this demo platform. :tada::unicorn::rainbow:

## Disclaimer :warning:

This project serves as a Sample Application, that you can tweak or completely re-purpose. It is community-supported and is maintained by members of the Okta team for developers and other IT professionals. Zartan is not an official Okta product and does not qualify for any Okta support. Okta makes no warranties regarding this project. Anyone who chooses to use this project must ensure that their implementation meets any applicable legal obligations including any Okta terms and conditions.

## Requirements

* Python >= 3.7+
* Flask >= 1.x
* A Okta tenant. [Free](https://developer.okta.com/) :wink:

## Features

<table>
    <tbody>
        <tr>
            <td>Application</td>
            <td>Travel Agency</td>
            <td>Streaming Service</td>
            <td>Hospitality</td>
            <td>Credit</td>
            <td>Finance</td>
            <td>Dealer</td>
            <td>Healthcare</td>
            <td>Admin</td>
            <td>Ecommerce</td>
        </tr>
        <tr>
            <td>Okta Session Auto Login</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
        </tr>
        <tr>
            <td>Login Widget (Social Login, IDP Discovery, MFA)</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
        </tr>
        <tr>
            <td>Password-less <br/>Widget&nbsp;</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
        </tr>
        <tr>
            <td>Custom Widget</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
        </tr>
        <tr>
            <td>Okta Hosted Widget</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
        </tr>
        <tr>
            <td>Custom&nbsp; Registration</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
        </tr>
        <tr>
            <td>Profile<br/>(ID Token and Access Token Viewer)</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
        </tr>
        <tr>
            <td>Custom MFA Enrollment</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
        </tr>
        <tr>
            <td>User Apps (Display Other User Apps, B2B)</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
        </tr>
        <tr>
            <td>Manage Users (Create User, Update User, Suspend User, Password Reset)</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
        </tr>
        <tr>
            <td>Step Up Authentication using MFA</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>&nbsp;</td>
            <td>✓</td>
        </tr>
        <tr>
            <td>ID Verification (Uses Evident)</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>✓</td>
            <td>&nbsp;</td>
            <td>✓</td>
        </tr>
        <tr>
            <td>Consent&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>✓</td>
            <td>&nbsp;</td>
            <td>✓</td>
        </tr>
        <tr>
            <td>Progressive Profiling&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>✓</td>
            <td>✓</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td>Temporary MFA for Users</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>✓</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td>User Verification via MFA</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>✓</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td>Hard Token Setup</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>✓</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td>User Approve Workflow</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>✓</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;✓</td>
        </tr>
        <tr>
            <td>IDP Management</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>✓</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td>Device Flow</td>
            <td>&nbsp;</td>
            <td>✓</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
    </tbody>
</table>

## Setup

### Manual
[Local Zartan Setup instructions](./docs/README.md)

### Docker-Compose

Pre-requirements
* [docker-desktop](https://www.docker.com/products/docker-desktop) => 2.3.0.4
* :warning: Assumed an OAuth/OpenID Client has already been created. Either by [terraform](https://github.com/udplabs/zartan/blob/master/docs/README.md#configure-initialize-and-apply-terraform-for-the-vertical-you-want-to-use) or [manually](https://github.com/udplabs/zartan/blob/master/docs/README.md#setup-okta-org-for-each-vertical-outside-of-terraform), with `.env` filed configured.

```bash
# Validate .env exist and configured
$ cat .env
# Okta Setting
OKTA_CLIENT_ID="0oa****************"
OKTA_CLIENT_SECRET="ntd************************"
OKTA_ISSUER="https://udp-narisak-a59.oktapreview.com/oauth2/aus**********"
OKTA_ORG_URL="https://udp-narisak-a59.oktapreview.com"
OKTA_OIDC_REDIRECT_URI="http://localhost:8666/authorization-code/callback"
OKTA_API_TOKEN="00iq*******7NHYULle5"
...

# Start the container(app) in the background (eg. '-d' flag). NOTE: Will take awhile since container needs to be built.

$ docker-compose up -d

# Navigate http://localhost:8666 with your favorite browser (eg. macOS default Chrome)
$ open http://localhost:8666

# Stop the container
$ docker-compose stop

# Clean up
$ docker-compose down

# Rebuild and start container, if you happen to update requirements.txt.
$ docker-compose up --build

# (Optional) Development commands for pytest. Assuming container is running in daemon mode.
$ docker-compose exec web pytest

# (Optional) Development commands for flake8. Assuming container is running in daemon mode.
$ docker-compose exec web flake8
```

## Original Authors
* [Shawn Recinto](https://github.com/srecinto)
* [Dan Zadik](https://github.com/dzadikdev)
* [Bhanchand Prasad](https://github.com/bhanchand)

<!--- DO NOT TOUCH BELOW, AUTO GENERATED -->

<!-- ALL-CONTRIBUTORS-BADGE:START - Do not remove or modify this section -->
[![All Contributors](https://img.shields.io/badge/all_contributors-13-orange.svg?style=flat-square)](#contributors)
<!-- ALL-CONTRIBUTORS-BADGE:END --> 
