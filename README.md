# Zartan
<!-- ALL-CONTRIBUTORS-BADGE:START - Do not remove or modify this section -->
[![All Contributors](https://img.shields.io/badge/all_contributors-10-orange.svg?style=flat-square)](#contributors-)
<!-- ALL-CONTRIBUTORS-BADGE:END -->

<!-- markdownlint-disable -->
<a href="https://en.wikipedia.org/wiki/Zartan">
  <img src="./docs/_img/zartan.png" width="200px;" />
</a>
<!-- markdownlint-enable -->

Zartan is a master of make-up and disguise and so is this demo platform. :tada::unicorn::rainbow:

## Disclaimer :warning:

This project serves as a Sample Application, that you can tweak or completely
re-purpose. It is community-supported and is maintained by members of the Okta
team for developers and other IT professionals. Zartan is not an official Okta
product and does not qualify for any Okta support. Okta makes no warranties
regarding this project. Anyone who chooses to use this project must ensure
that their implementation meets any applicable legal obligations including any
Okta terms and conditions.

## Requirements

* Python >= 3.7+
* Flask >= 1.x
* A Okta tenant. [Free](https://developer.okta.com/) :wink:

## Features

<!-- markdownlint-disable -->
<table>
    <tbody>
        <tr>
            <td>Application</td>
            <td>Travel Agency</td>
            <td>Streaming Service</td>
            <td>Hospitality</td>
            <td>Credit</td>
            <td>Finance</td>
            <td>Dealer</td>
            <td>Healthcare</td>
            <td>Admin</td>
            <td>Ecommerce</td>
        </tr>
        <tr>
            <td>Okta Session Auto Login</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
        </tr>
        <tr>
            <td>Login Widget (Social Login, IDP Discovery, MFA)</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
        </tr>
        <tr>
            <td>Password-less <br/>Widget&nbsp;</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
        </tr>
        <tr>
            <td>Custom Widget</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
        </tr>
        <tr>
            <td>Okta Hosted Widget</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
        </tr>
        <tr>
            <td>Custom&nbsp; Registration</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
        </tr>
        <tr>
            <td>Profile<br/>(ID Token and Access Token Viewer)</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
        </tr>
        <tr>
            <td>Custom MFA Enrollment</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
        </tr>
        <tr>
            <td>User Apps (Display Other User Apps, B2B)</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
        </tr>
        <tr>
            <td>Manage Users (Create User, Update User, Suspend User, Password Reset)</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
        </tr>
        <tr>
            <td>Step Up Authentication using MFA</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>&nbsp;</td>
            <td>✓</td>
        </tr>
        <tr>
            <td>ID Verification (Uses Evident)</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>✓</td>
            <td>&nbsp;</td>
            <td>✓</td>
        </tr>
        <tr>
            <td>Consent&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>✓</td>
            <td>&nbsp;</td>
            <td>✓</td>
        </tr>
        <tr>
            <td>Progressive Profiling&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>✓</td>
            <td>✓</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td>Temporary MFA for Users</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>✓</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td>User Verification via MFA</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>✓</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td>Hard Token Setup</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>✓</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td>User Approve Workflow</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>✓</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;✓</td>
        </tr>
        <tr>
            <td>IDP Management</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>✓</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td>Device Flow</td>
            <td>&nbsp;</td>
            <td>✓</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
    </tbody>
</table>
<!-- markdownlint-enable -->

## Setup

### Manual

[Local Zartan Setup instructions](./docs/README.md)

### Docker-Compose

Pre-requirements

* [docker-desktop](https://www.docker.com/products/docker-desktop) => 2.3.0.4
* :warning: Assumed an OAuth/OpenID Client has already been created. Either by
[terraform](https://github.com/udplabs/zartan/blob/master/docs/README.md#configure-initialize-and-apply-terraform-for-the-vertical-you-want-to-use)
or [manually](https://github.com/udplabs/zartan/blob/master/docs/README.md#setup-okta-org-for-each-vertical-outside-of-terraform)
, with `.env` filed configured.

```bash
# Validate .env exist and configured
$ cat .env
# Okta Setting
OKTA_CLIENT_ID="0oa****************"
OKTA_CLIENT_SECRET="ntd************************"
OKTA_ISSUER="https://udp-narisak-a59.oktapreview.com/oauth2/aus**********"
OKTA_ORG_URL="https://udp-narisak-a59.oktapreview.com"
OKTA_OIDC_REDIRECT_URI="http://localhost:8666/authorization-code/callback"
OKTA_API_TOKEN="00iq*******7NHYULle5"
OKTA_SIW_VERSION="Defaults to v5.16.1"
OKTA_AUTH_JS_VERSION="Defaults to v5.11.0"
...

# Start the container(app) in the background (eg. '-d' flag). NOTE: Will take a
# while since container needs to be built.
$ docker-compose up -d

# Navigate http://localhost:8666 with your favorite browser (eg. macOS default Chrome)
$ open http://localhost:8666

# Stop the container
$ docker-compose stop

# Clean up
$ docker-compose down

# Rebuild and start container, if you happen to update requirements.txt.
$ docker-compose up --build

# (Optional) Development commands for pytest. Assuming container is running in daemon mode.
$ docker-compose exec web pytest

# (Optional) Development commands for flake8. Assuming container is running in daemon mode.
$ docker-compose exec web flake8
```

## Authors

* [Shawn Recinto](https://github.com/srecinto)
* [Dan Zadik](https://github.com/dzadikdev)
* [Bhanchand Prasad](https://github.com/bhanchand)

<!--- DO NOT TOUCH BELOW, AUTO GENERATED -->

## Contributors ✨

Thanks goes to these wonderful people ([emoji key](https://allcontributors.org/docs/en/emoji-key)):

<!-- ALL-CONTRIBUTORS-LIST:START - Do not remove or modify this section -->
<!-- prettier-ignore-start -->
<!-- markdownlint-disable -->
<table>
  <tr>
    <td align="center"><a href="https://github.com/srecinto"><img src="https://avatars.githubusercontent.com/u/2954123?v=4?s=100" width="100px;" alt=""/><br /><sub><b>Shawn Recinto</b></sub></a><br /><a href="https://github.com/udplabs/zartan/commits?author=srecinto" title="Code">💻</a> <a href="#projectManagement-srecinto" title="Project Management">📆</a> <a href="https://github.com/udplabs/zartan/commits?author=srecinto" title="Tests">⚠️</a></td>
    <td align="center"><a href="https://noinarisak.github.io/til"><img src="https://avatars.githubusercontent.com/u/341437?v=4?s=100" width="100px;" alt=""/><br /><sub><b>Noi Narisak</b></sub></a><br /><a href="https://github.com/udplabs/zartan/commits?author=noinarisak" title="Code">💻</a> <a href="#projectManagement-noinarisak" title="Project Management">📆</a> <a href="https://github.com/udplabs/zartan/commits?author=noinarisak" title="Documentation">📖</a> <a href="#infra-noinarisak" title="Infrastructure (Hosting, Build-Tools, etc)">🚇</a></td>
    <td align="center"><a href="https://github.com/bhanchand"><img src="https://avatars.githubusercontent.com/u/18057642?v=4?s=100" width="100px;" alt=""/><br /><sub><b>bhanchand</b></sub></a><br /><a href="https://github.com/udplabs/zartan/commits?author=bhanchand" title="Code">💻</a></td>
    <td align="center"><a href="http://joel.franusic.com"><img src="https://avatars.githubusercontent.com/u/41538?v=4?s=100" width="100px;" alt=""/><br /><sub><b>Joël Franusic</b></sub></a><br /><a href="https://github.com/udplabs/zartan/commits?author=jpf" title="Documentation">📖</a> <a href="https://github.com/udplabs/zartan/commits?author=jpf" title="Code">💻</a></td>
    <td align="center"><a href="https://github.com/anushrav"><img src="https://avatars.githubusercontent.com/u/22229475?v=4?s=100" width="100px;" alt=""/><br /><sub><b>Anushrav Vatsa</b></sub></a><br /><a href="https://github.com/udplabs/zartan/commits?author=anushrav" title="Code">💻</a> <a href="https://github.com/udplabs/zartan/issues?q=author%3Aanushrav" title="Bug reports">🐛</a></td>
    <td align="center"><a href="https://github.com/dancinnamon-okta"><img src="https://avatars.githubusercontent.com/u/42472957?v=4?s=100" width="100px;" alt=""/><br /><sub><b>dancinnamon-okta</b></sub></a><br /><a href="https://github.com/udplabs/zartan/commits?author=dancinnamon-okta" title="Code">💻</a></td>
    <td align="center"><a href="https://wallick.net"><img src="https://avatars.githubusercontent.com/u/28658181?v=4?s=100" width="100px;" alt=""/><br /><sub><b>Mike Wallick</b></sub></a><br /><a href="https://github.com/udplabs/zartan/commits?author=mdwallick" title="Code">💻</a></td>
  </tr>
  <tr>
    <td align="center"><a href="http://2xod.com/"><img src="https://avatars.githubusercontent.com/u/3945391?v=4?s=100" width="100px;" alt=""/><br /><sub><b>Andrew Ry</b></sub></a><br /><a href="https://github.com/udplabs/zartan/commits?author=RyAndrew" title="Code">💻</a></td>
    <td align="center"><a href="https://github.com/dzadikdev"><img src="https://avatars.githubusercontent.com/u/57756515?v=4?s=100" width="100px;" alt=""/><br /><sub><b>dzadikdev</b></sub></a><br /><a href="https://github.com/udplabs/zartan/commits?author=dzadikdev" title="Code">💻</a></td>
    <td align="center"><a href="https://github.com/zeekhoo"><img src="https://avatars.githubusercontent.com/u/10700898?v=4?s=100" width="100px;" alt=""/><br /><sub><b>Zee Khoo</b></sub></a><br /><a href="https://github.com/udplabs/zartan/commits?author=zeekhoo" title="Documentation">📖</a> <a href="https://github.com/udplabs/zartan/commits?author=zeekhoo" title="Code">💻</a> <a href="https://github.com/udplabs/zartan/issues?q=author%3Azeekhoo" title="Bug reports">🐛</a></td>
  </tr>
</table>

<!-- markdownlint-restore -->
<!-- prettier-ignore-end -->

<!-- ALL-CONTRIBUTORS-LIST:END -->

This project follows the [all-contributors](https://github.com/all-contributors/all-contributors)
specification. Contributions of any kind welcome!
